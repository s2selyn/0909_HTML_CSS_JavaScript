<!DOCTYPE html>
<html lang="en">
<head>
    <title>써보자써보자하게요</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        div {
            box-sizing: border-box;
        }

        #wrap,
        #practice {
            width: 1200px;
            height: 400px;
            margin: auto;
            box-shadow: 1px 1px 1px lightgrey;
        }

        .card {
            width: 230px;
            height: 360px;
            padding-bottom: 20px;
            display: inline-block;

            &:hover {
                box-shadow: 1px 2px 4px lightgrey;
            }
        }

        .card > img {
            width: 230px;
            height: 300px;
        }

        /* 웹툰 제목이니까 h태그 써야겠다 */
        .card > h4 {
            font-size: 18px;
            font-weight: 800;
        }

        .card > p {
            font-size: 14px;
            font-weight: 500;
        }

        .area {
            background-color: lemonchiffon;
            border: 1px solid blanchedalmond;
            height: 300px;
        }
    </style>
</head>
<body>
    
    <h1>배열과 객체의 활용</h1>

    <h3>* 객체배열 써보기</h3>

    <!-- 너낌만 보기 -->
    <!-- 네이버 웹툰을 구경했다! 객체랑 배열이 쏙쏙 들어가있군요 비슷하게 해보자 -->

    <div id="wrap"></div>

    <!-- 실습한거 넣을 div -->
    <div id="practice"></div>

    <script>

        // html화면요소 로딩이 끝났다
        window.onload = function() {

            // 그러면 이 안에서
            // 컨트롤러로 요청을 보냄~
            // 어떻게 보내는지 모름 아직 안배웠음

            /*
            function 요청보내는함수() {
                // 얼씨구절씨구 ~~~
            }
            요청보내는함수(); 이걸 이용해서 컨트롤러에 요청을 보내겠지
            DAO까지 간 다음 DB에 가서 웹툰이라는 데이터를 SELECT 했겠지
            타이틀 썸네일이미지 작가 조회해서
            응답이 돌아왔다고 가정
            */

            // 컨트롤러가 반환해주는 응답데이터라고 가정
            // 배열이 왔는데 배열의 요소로 객체가 다섯 개 왔음 -> 웹툰 테이블에서 조회해온 데이터
            // 컬럼은 세개라고 가정하자
            const webtoons = [

                {
                    image : "https://image-comic.pstatic.net/webtoon/842620/thumbnail/thumbnail_IMAG21_44eb7809-90e1-46da-a0ec-1ead08a8e9e9.jpg",
                    title : "해골전령 이야기",
                    author : "kain_y / 소라게"
                },
                {
                    image : "https://image-comic.pstatic.net/webtoon/807178/thumbnail/thumbnail_IMAG21_28fcfb22-aae7-41b4-8767-05f6dd176b03.jpg",
                    title : "캐슬 2:만인지상",
                    author : "정연, 박만사"
                },
                {
                    image : "https://image-comic.pstatic.net/webtoon/642598/thumbnail/thumbnail_IMAG21_c784c8b0-c6d3-46ca-9a02-d3c4c04a8c83.jpg",
                    title : "조선왕조실톡",
                    author : "무적핑크"
                },
                {
                    image : "https://image-comic.pstatic.net/webtoon/747269/thumbnail/thumbnail_IMAG21_aabd9952-ff45-47a2-a543-33f19a5c6708.jpg",
                    title : "전지적 독자 시점",
                    author : "UMI / 슬리피-C / 싱숑"
                },
                {
                    image : "https://image-comic.pstatic.net/webtoon/838002/thumbnail/thumbnail_IMAG21_aee939b2-2d3c-445f-a7d8-82414f4f9482.jpg",
                    title : "종말이 찾아왔다",
                    author : "전선욱"
                },

            ];

            console.log(webtoons);

            // 이렇게 받은 데이터로 화면을 만들어서 div에 동적인 요소로 넣어주자
            // 구조도 잡아야할듯? 네이버는 리스트로 했네요
            // div로 감싸고 썸네일 넣을 img 태그, 작품정보 넣을 p태그 두개
            // 스타일도 미리해볼까?

            /*
            const skeleton = webtoons[0];

            // console.log(skeleton);
            // 객체 하나만 나온다, 이걸로 요소를 만들어주자

            const webtoon1 = `<div class="card">
                                <image src=${skeleton.image} />
                                <h4>${skeleton.title}</h4>
                                <p>${skeleton.author}</p>
                              </div>`;
            // 동적인 요소로 만들어버렸다제
            // 이걸 이제 화면상에 출력해주자
            document.getElementById("wrap").innerHTML = webtoon1;

            // 나중에 DB에서 몇개가 오는지 모를텐데 어느세월에 개수세서 하나씩 이작업을하니
            // 반복문을 써야겠군, for of 쓰든가 map 쓰든가 -> for of로 낙찰
            */

            // for of 반복하면서 작업해야하니까 변수선언 먼저 해두자
            let element = "";
            for(let webtoon of webtoons) {
                // 동적인 요소 만들었던 코드를 여기에 만들어주고 복합대입연산자로 넣어주자
                element += `<div class="card">
                                <img src="${webtoon.image}" />
                                <h4>${webtoon.title}</h4>
                                <p>${webtoon.author}</p>
                            </div>`;
            };

            // ??? 17:30
            document.getElementById("wrap").innerHTML = element;

            // DB에서 데이터 조회해오면 이런 모양일텐데 브라우저상에 띄워주려고 자바스크립트 하는중이에오
            // 자바 콘솔에 띄우던걸 이뿌게 하려고 지금 이걸 배운다고여

            // 실습해본거~
            const places = [

                {
                    img : "https://a0.muscache.com/im/pictures/hosting/Hosting-1157133225923295926/original/1664a4f5-dde0-404b-abb8-75b15946d44c.jpeg?im_w=720",
                    name : "부산의 아파트",
                    rate : 4.95,
                    spec : "광안 / 통유리 / 고층",
                    stayingDays : "4월 18일 ~ 4월 19일",
                    pricePerDay : "125,000",
                    totalPrice : ""

                },
                {
                    img : "https://a0.muscache.com/im/pictures/4978439c-932f-43de-9810-56123a7c5da9.jpg?im_w=720",
                    name : "부산의 아파트",
                    rate : 4.9,
                    spec : "광안 / 바다 1초",
                    stayingDays : "12월 17일",
                    pricePerDay : "134,000",
                    totalPrice : ""
                },
                {
                    img : "https://a0.muscache.com/im/pictures/hosting/Hosting-U3RheVN1cHBseUxpc3Rpbmc6MTQzOTA1OTM4MDUwMzg4NDc2Nw==/original/a9ef458f-316d-4b07-aa2f-324f56698fc4.jpeg?im_w=720",
                    name : "동래구의 아파트",
                    rate : 4.92,
                    spec : "킹사이즈 침대 1개",
                    stayingDays : "11월 19일",
                    pricePerDay : "235,000",
                    totalPrice : ""
                },
                {
                    img : "https://a0.muscache.com/im/pictures/hosting/Hosting-1254611685750285523/original/5a7cbab5-d254-4068-81f2-7aeec2554cf9.jpeg?im_w=720",
                    name : "광안리의 집",
                    rate : 4.89,
                    spec : "퀸사이즈 침대 2개",
                    stayingDays : "10월 27일",
                    pricePerDay : "142,000",
                    totalPrice : ""
                },
                {
                    img : "https://a0.muscache.com/im/pictures/hosting/Hosting-U3RheVN1cHBseUxpc3Rpbmc6NjI4Nzk2NDc5Mzk3Nzc2NzIz/original/9328f0ad-6465-40b9-89b9-54383cbcaa7f.jpeg?im_w=720",
                    name : "오크홀름의 아파트",
                    rate : 4.85,
                    spec : "엘시티뷰",
                    stayingDays : "12월 22일",
                    pricePerDay : "222,000",
                    totalPrice : ""
                },
                
            ];

            console.log(places);

            /*
            const place1 = places[0];

            const placeEl = `<div class="card">
                                <img src="${place1.img}" />
                                <h4>${place1.name}</h4>
                                <p>${place1.rate}</p>
                            </div>`;

            document.getElementById("practice").innerHTML = placeEl;
            */

            let placeEl = "";
            for(let place of places) {

                placeEl += `<div class="card">
                                <img src="${place.img}" />
                                <h4>${place.name}</h4>
                                <p>${place.rate}</p>
                            </div>`;

            };

            document.getElementById("practice").innerHTML = placeEl;

        }
    </script>

    <hr />

    <h3>* 생성자 함수</h3>

    <p>
        new 키워드를 사용해서 객체를 생성할 수 있는 함수를 의미 <br />
    </p>
    <!-- 자바의 constructor와 동일 -->

    <button onclick="con();">실행</button>
    
    <script>
        function con() {

            // 웹툰 객체를 만들고 싶음
            // 썸네일, 제목, 작가명
            const webtoon1 = {
                image : "",
                title : "",
                author : ""
            };
            // 원래 이렇게 하던걸

            // 이런식으로 하고싶음
            const webtoon2 = new Webtoon("이미지경로", "재밌는웹툰", "이승철");
            // 이걸 하려면 생성자 함수를 정의해서 써야함

            // 생성자 만들어서 객체 여러개 만들 수 있게됨
            const webtoon3 = new Webtoon("하하", "호호", "히히");

            // 생성자 함수 정의(선언할 때 첫 글자를 대문자로 만들면됨)
            function Webtoon(image, title, author) {
                // 생성자 함수를 호출할 때 넘겨주는 인자값을 받아줄 매개변수가 필요함
                // 자바스크립트 매개변수는 자료형 없이 이름만!

                // 자바에서 값 대입해서 필드 초기화 작업했음, 여기도 똑같아요
                this.image = image;
                this.title = title;
                this.author = author;

                // 우리는 어차피 DB에서 가져올거라 쓸일이 없을 것 같네요
                // 자바스크립트 내용 설명하기는 좋겠군요
                // 근데 이거 왜 되나요? property가 없는데 this가 말이 되나?
                // 얘는 어떻게 동작하는가?
                // 객체 안의 this는 자기자신
                // 자기자신을 참조해서 객체명 + 점 + 속성명 + 대입 -> 객체에 뭐하는 작업? 객체에 속성을 추가하는 방법
                // 생성자 함수를 호출하면 내부적으로 this라는 이름의 빈 객체를 만든다
                /*
                this = {
                    image : "이미지경로",
                    title : "재밌는웹툰",
                    author : "이승철"
                }
                */
                // 그리고 image 속성을 추가하고 "이미지경로"라는 값을 대입할래 이런식
                // this 빈객체를 생성하는 이 작업은 최상단에서 일어남
                // 그리고 생성자 끝나는 마지막에 this를 반환함
                // return this;

            };

            console.log(webtoon2);
            console.log(webtoon3);

            // front-end 개발자라면 쓸일이 있을지도 몰라요

        }
    </script>

    <hr />

    <h3>* Date 객체</h3>

    <button onclick="dateFn();">날짜날짜 사용</button>
    <div id="area1" class="area"></div>

    <!-- 개발자가 잘 다뤄야할 세가지 : 문자, 숫자, 날짜(자바, 자바스크립트, SQL 어디서든 각 언어에서) -->
    <!-- 그래야 연산하거나 출력할 때 문제가 없음 -->

    <script>
        function dateFn() {

            const area = document.getElementById("area1");

            // Date객체 : 자바스크립트에서 날짜를 다루는 객체
            // 생성자함수로 만든다
            const date1 = new Date();
            // Number, new Array 이런것들도 생성자함수였음
            area.innerHTML = `현재 날짜 및 시간 :  ${date1} <br>`;

            // Date로 날짜 세팅할수도 있음
            // 2026년 2월 12일로 세팅
            const date2 = new Date(2026, 2 - 1, 12);
            area.innerHTML += `종강일 : ${date2} <br>`;
            // ...? 뭔가 이상한데
            // 연도랑 날짜는 변할 수 있음(지구멸망은 알수없고 월마다 날짜수가 다름)
            // 월은 고정값임, 그래서 월을 배열로 관리함
            // 배열이니까 0번부터 시작해버림, 1월이 0번인덱스, 그래서 월이 들어갈 자리에 월이 들어가는 인덱스를 써줌
            // 직관적으로 보기에는 잘못 만들었지, 나머지는 그대로 값을 쓰는데 여기만 인덱스를 넣어야한다는게 좀 직관적으로 통일성이 없네
            // 데이터 관리적 측면에서는 나머지는 왔다갔다하고 월은 고정된 길이겠구나
            // 월의 경우 인덱스를 의미하기 때문에 해당 월에 -1을 해줘야함

            // 시간도 정해볼까?
            // 2026년 2월 12일 17시 50분으로 세팅
            const date3 = new Date(2026, 2 - 1, 12, 17, 50, 0);
            area.innerHTML += `종강일(시간) : ${date3} <br>`;

            // milisecond까지도 가능
            // ms까지 세팅??
            // 1초는 1000ms니까 5초 잔소리타임 추가해서 5000ms
            const date4 = new Date(2026, 2 - 1, 12, 17, 50, 0, 5000);
            area.innerHTML += `찐종강일(시간) : ${date4} <br>`;

            // 종강일까지 디데이 구하기
            const endDay = new Date(2026, 2 - 1, 12);
            const today = new Date();
            area.innerHTML += `종강일까지 디데이 : ${endDay - today} <br>`;
            // 단위가 ms단위로 바뀌어서 출력됨

            // 일자 단위로 바꿔주자
            // MS ==> Day
            // 1s == 1000ms
            // 1m == 60s == 60 * 1000ms
            // 1h == 60m == 60 * 60s == 60 * 60 * 1000ms
            // 1d == 24h == 24 * 60m == 24 * 60 * 60s == 24 * 60 * 60 * 1000ms
            const dDay = (endDay - today) / (24 * 60 * 60 * 1000);
            alert(`종강까지 ${Math.ceil(dDay)}일 남았습니다.`);

        }
    </script>

</body>
</html>