<!DOCTYPE html>
<html lang="en">
<head>
    <title>함수를 씁시다</title>

    <style>
        .area {
            width: 500px;
            height: 200px;
            border: 1px solid tomato;
            background-color: salmon;
        }
    </style>

</head>
<body>

    <!-- 함정카드 동작방식 -->
    <p>2차 민생 쿠폰 지급받으셈 ㅋ 밑에꺼 누르셈 ㅋ</p>
    <a href="http://www.google.com">http://www.naver.com</a>

    <hr />

    <h1>함수! (function)</h1>

    <!--
        1. 선언적함수 : 식별자가 달려있는 함수, 식별자를 호출해서 실행

        2. 익명함수 : 이름이 없음, 속성에 함수를 대입해서 구현

        앞에서 많이 했으니까 돌아보는 용도
    -->

    <h3>선언적함수</h3>

    <pre onclick="firstFn();">
        [표현법]

        function 함수명(매개변수, 매개변수) {
            함수를 호출했을 때 실행할코드;

            return 결과값;
        }

        - 매개변수가 없는 경우 생략 가능
        - 반환할 결과값이 없는 경우 return 생략 가능
    </pre>

    <div id="area1" class="area" onclick="firstFn();"></div>

    <script>
        function firstFn() {
            // 함수의 존재의의
            /* 코드의 재사용 + 함수식별자를 이용해서 의미를 전달 */

            // firstFn이 함수명, 식별자가 되니까 이걸 가지고 함수를 호출할 수 있음
            document.getElementById("area1").innerHTML = "함수호출";
            // alert("하이"); // 이거 하나뿐이라면 굳이 함수를? onclick에서 했으면 끝일텐데
            // 아무튼 함수를 만들었다면 여기저기서 선언해둔 함수를 호출해서 재사용으로 쓸수있겠지
            // 재사용을 목적으로 사용이 되어야겠지
            // ??? 11:15 코드의 길이...?도 판단 기준이 되나?
        };
    </script>

    <hr />

    <h3>* 익명함수</h3>

    <pre>
        [ 표현법 ]

        변수 / 속성 = () => {

            소스코드가 어쩌고저쩌고~~~

        }

        => 주로 이벤트 핸들러 작성 시 사용
    </pre>

    <button id="btn">하잉</button>
    <div id="area2" class="area"></div>

    <script>
        const btnEl = document.getElementById("btn");

        // 버튼을 클릭했을 때 수행하고 싶은 일을 익명함수를 이용해서 작성
        btnEl.onclick = () => {
            // 함수를 작성한 것의 의도
            // 버튼을 클릭했을 때 수행하고 싶은 코드들
            // 버튼요소에 클릭 이벤트가 발생했을 때 요걸 하고싶음
            //     특정 이벤트 발생 시 동작시킬 코드뭉치 == 이벤트 핸들러
            document.getElementById("area2").innerHTML = "함수호출";

            // 우리는 항상 이 용도로 사용하고 익명함수를 재활용하지 않았음
            // 이 요소에 이벤트 발생 시 이런것들을 동작시키겠다~
            // 얘는 지금 onclick이 트리거가 되고, 이름이 없이 동작시킬 코드들만 들어있음
        };
    </script>

    <hr />

    <h3>함수의 매개변수</h3>

    <br />

    <!-- 함수를 호출하면서 다양한 형태의 인자값을 전달해볼 버튼 여러개를 만들어보자 -->
    <!-- button[onclick="parameterFn()"]*6 -->
    <button onclick="parameterFn('문자열')">string전달</button>
    <!-- 바깥에 ""썼으니 소괄호 안에서는 '' -->
    <button onclick="parameterFn(100)">number전달</button>
    <button onclick="parameterFn([1, 2, 3])">array전달</button>
    <button onclick="parameterFn(prompt('이름?'))">function전달</button>
    <!-- 매개변수가 있기만 하면 자료형과는 전혀 무관함, 인자값의 개수와 매개변수의 개수만 동일하다면
         어떤 형태의 값이든 전달 가능 -->

    <button onclick="parameterFn()">전달無</button>
    <!-- 실행에는 문제가 없음 / 단, undefined가 대입 -->

    <button onclick="parameterFn(1, 2)">더 많이 전달</button>
    <!-- 실행에는 문제가 없음 / 단, 초과된 전달값은 사라짐 -->

    <div id="area3" class="area"></div>

    <script>
        function parameterFn(value) {
            // button에서 값을 전달하면 이곳에서 전달받은 값을 출력해보자

            // 함수 입장에서는 받아서 활용해야하니까 값을 받아줄 수 있는 매개변수가 있어야함
            // 자바스크립트에서는 매개변수명만 작성함
            // 매개변수 작성 시 자료형을 지정하지 않음, var / let키워드 사용 X
            // 오로지 변수명만 작성(타입이 있지만 자기가 알아서 하니까)

            console.log(value);
            // 넘어온 문자열이 잘 출력된다!
            document.getElementById("area3").innerHTML = value;

            // 버튼에 숫자를 인자값으로 넣어도 잘 출력되고

            // 배열도 잘된다

            // 자바스크립트는 함수가 일급객체로 취급되고 값으로 사용될 수 있음
            // 함수의 반환값이 잘 전달된다!

            // 매개변수 아무것도 안넣고 함수 호출하면 undefined, 이건 변수 초기화 안했을때 나오는것
            // 그럼 얘 변수에 아무 값도 대입이 안되었다는 뜻, 에러가 발생하거나 동작하지 않거나 이러지는 않는다

            // 매개변수 개수보다 많은 개수의 값을 전달하면 그중에 제일 앞에 있는것으로 나온다
            // 그럼 나머지는? 증발..!

        };

        // 문제가 생기지 않고 돌아감, 나중에 문제가 생겼을 때 어디가 문제인지 찾아가기가 힘들어
        // 초보자에게는 빡빡한 언어가 더 좋을지도, 정해진 규칙들이 있으니까
    </script>

    <hr/>

    <!-- 이런 상황에서 생각해봐야할문제 -->
    <button onclick="test(10, 30, 50, 60, 70, 80, 90, 100, 760);">나는 버튼</button>
    <!-- 몇개일지도 모르고 많다고 생각해보자 -->
    <!-- 선언적함수인데 호출할때마다 넘기는 인자의 개수가 다르다면? -->
    <button onclick="test(10, 30, 20, 50)">나도 버튼</button>
    <button onclick="test(2)">버튼 삼형제</button>
    
    <script>
        // 선언적 함수니까 재활용할테니 이런경우가 생길수도 있겠지? 그럼 매개변수를 몇개 가져야함..?
        function test(...nums) {

            // 여러명이 아니라 혼자 작업한다면 이런 방법이 있음
            // console.log(arguments); // 각 함수 호출 시점에 넘어오는 인자값에 맞추어서 arguments 배열의 요소가 추가된다
            // 함수 호출 시 전달하는 인자값은 내부적으로 arguments라는 배열에 담김
            // * arguments : 모든 함수마다 내부적으로 하나씩 존재함

            // 여러사람이 작업할 때 권장되는 방법
            // 그리고 아까 spread 문법을 배웠으니 매개변수 자리에 이런식으로 받을 수 있음
            // ??? 11:42 이렇게 작성하면 의미론적으로 매개변수가 여러개 있을 수 있으니 어쩌구저쩌구
            console.log(nums);

        };
    </script>

    <hr />

    <h3>매개변수로 this키워드 전달해보기(선언적함수 ver)</h3>

    <button onclick="color(this);" id="btn1">내가 누구게?</button> <br />
    <button onclick="color(this);" id="btn2">내가 누구게?</button>

    <!-- 버튼을 클릭했을 때 버튼의 content 컬러를 오렌지색으로 바꿔보자 -->
    <script>

        // 실습할 때 처음 결과물을 만들어야 하는데 처음부터 최종형태의 뭔가를 만들어내려고 작업을함
        // 하지만 수업시간에 최종생성물을 강조하시진 않았음, 이걸 하려면 뭐부터, 어떤걸 작업 해야하나 생각
        // 이런 문제를 만났을 때 접근하고 생각하는 방식, 어떻게 고치고 문제를 어떻게 해결할지
        // 하려는 작업이 뭔지 명확하게 생각, 그 다음엔 편하고 가독성 생각
        // 절차, 뭐해야하는지를 생각해주세요, 그래야 뭘 가지고 개발하든지 상관없게된다
        // 0.1 버전이 어려워, 남들 다 하는 0.4는 구글에만 쳐도 나온다 어려운거 해야 잘하게되겠지
        // 절차 필요한내용 값 공간 이런것들 생각하기, 어렵게 살아

        // ver 0.1
        // 버튼에 함수 작성, id도 추가
        function changeColor1() {
            document.getElementById("btn1").style.color = "orangered";
        };
        
        // 이러면 안된다, 똑같은 함수를 호출하는데 두개중에 아무거나 눌러도 1번 버튼이 바뀌어버림
        // 함수 이름 변경하고 버튼마다 다른 함수를 호출하게 만들어

        function changeColor2() {
            document.getElementById("btn2").style.color = "orangered";
        };

        // 코드 중복, 함수 모양도 비슷하게 생김, 왜 두개나 해야해 하나로 합칠 수 없을까?

        // 조건문을 써볼까?
        // ver 0.2
        // 조건식에 인자값을 이용하도록 함수 호출할 때 인자값을 넣어주자
        // 함수 이름을 다시 동일하게 바꾸고 매개변수 작성
        function changeColor(value) {
            if(value === 1) {
                document.getElementById("btn1").style.color = "orangered";
            } else {
                document.getElementById("btn2").style.color = "orangered";
            }
        };

        // 아무리 생각해도 if 내부도 중복, 바뀌는게 아이디뿐이고 매개변수로 1, 2를 각각 넘기네
        // 백틱도 배웠으니 넘어온걸 붙여버릴까? 안에 실행할 문자열만 바뀌게됨
        // 함수 이름도 바까봄
        // ver 0.3
        function change(value) {
            document.getElementById(`btn${value}`).style.color = "orangered";
        };

        // 이번에 하고싶었던건 매개변수에게 this 전달해보는거였음
        // 함수명 수정 --> color, 둘 다 인자값으로 this 작성
        // ver 0.4
        function color(value) {
            // console.log(value);
            // 함수를 호출한 요소객체 자기자신(함수호출주체)이 넘어온다
            // --> document.getElementById(`btn${value}`) 이거겠죠
            // 그럼 value에 바로 접근해서 코드 작성 가능
            value.style.color = "orangered";
        }

        // 선언적 함수에서 매개변수에 this 키워드를 전달할 경우 함수를 호출한 요소 자기자신을 전달한다
        // 코드가 간결해질 수 있다
    </script>

    <!-- 자바스크립트에서는 블록스코프 끝났을 때 세미콜론을 붙여줄 수 있음, 보통 붙여주는 편 -->
    <!-- function 스코프 끝났을 때 붙인다, 그러다가 마지막 function에는 마지막이라는 의미로 안붙임
    뒤에 추가작업을 한다면 붙이는데 정해진건 아니고 코드 스타일마다 조금씩 다름(자바에서는 이런거안했음) -->
    <hr />

    <h2>함수의 반환</h2>

    <!-- 아까 배열요소 랜덤으로 뽑는작업했음 -->

    <button onclick="random();">실행하기</button>
    <div id="area6" class="area"></div>

    <script>
        // const random = parseInt(Math.random() * 10) + 1;
        // 스크립트 영역에 변수를 선언하고 사용하면 모든곳에서 사용하게된다

        // 이걸 외부에 놓는게 아니라 다른 함수 내부에 숨겨서 사용하고싶음
        function generateNum() {
            const num = parseInt(Math.random() * 10) + 1;
            // 이렇게 해두면 바깥에서 얘를 사용할 방법이 별로 없음
            return function naming(name) {
                return `${name}님의 랜덤한 숫자 : ${num}`;
            };
            // 밖에서 사용할 수 있게 반환시킴

            // 자바스크립트는 함수가 중요하기 때문에 return 할 때 함수를 반환할수도 있음
            // 이제 generateNum을 호출하면 naming 함수가 또 호출됨
        };

        // 클로저(Closure) : 외부 함수 실행이 끝나더라도
        // 반환한 내부 함수를 통해서 외부 함수 내 변수를 사용할 수 있도록
        // 하는 기술
        // 굳이 비교하자면 자바의 캡슐화와 같은 기술
        // 스코프가 끝나도 사용할 수 있다는 개념이 중요함
        // 일반 함수의 return은 차이가 없고 자바스크립트의 큰 특징이 Closure, 함수를 반환할 수 있다는 장점

        function random() {
            // 여기서 generateNum을 쓰고싶은데 방법이 딱히...?
            // 그럼 밖에서 사용해줄 수 있도록 generateNum 함수에 return구문 추가

            const naming = generateNum();
            // 이렇게 두면 generateNum의 호출은 끝남

            console.log(naming);
            // 함수 호출 시 반환되는 값이 존재하기 때문에 변수로 받을 수 있음

            document.getElementById("area6").innerHTML = naming("홍길동");
            // 이미 함수의 호출은 끝났는데도 naming 함수를 호출하면서 인자값을 전달하면
            // generateNum 함수를 통해 사용이 가능함
        }
    </script>

    <hr />

    <h3>* 익명함수를 반환하는 경우</h3>

    <button onclick="testFn()();">극단적인코드</button>

    <script>
        function testFn() {

            // 얘가 익명함수를 호출하면서 반환해버리는 극단적인 상황
            return function() {
                alert("날불렀니");
            };
            // 이렇게만 쓰면 동작하지 않는다, 이름이 없는데 어떻게 부르는가?
            // testFn은 호출해서 익명함수가 돌아옴 -> ()만 붙여서 호출가능
            // 아 리턴해서 익명함수 받아서 실행시키는구나~ 라고 생각하면 됩니다
            // 자바스크립트에서는 함수의 리턴값으로 함수를 리턴할 수 있다
            // 클로저 개념은 과정에서 아마 쓸일이 없을지도? 회사가서도 쓸일이 있을까?

        }
    </script>

</body>
</html>