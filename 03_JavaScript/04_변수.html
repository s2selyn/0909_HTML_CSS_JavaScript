<!DOCTYPE html>
<html lang="en">

<head>
    <title>변수해야지</title>
</head>

<body>

    <h1>안녕 나는 변수야</h1>

    <!-- 똑같음, 값을 저장하는 메모리상의 공간 -->
    <!-- 자바와의 차이점만 알면 된다 -->

    <!--
        자바 == 명확한 자료형(물론 자바도 타입추론이 가능함)

        자바스크립트 == 자료형을 선언하지 않음,
        (장점이자 단점, 의도하지 않은 자료형의 값이 들어갈 수 있는 위험이 있음, 자료형 관련 문제가 많이 생김)
        ==> 자바스크립트에 자료형만 좀 붙이면 안됨?? => 타입스크립트

        자바랑 작성법이 다름
    -->

    <h2>자바스크립트는 var, let, const를 이용해서 변수를 선언</h2>
    <h3>* var, let, const의 차이점</h3>

    <h4>변수를 선언해보자</h4>
    <!-- button#var-btn{나는 변수 선언버튼} -->
    <button id="var-btn">나는 변수 선언버튼</button>

    <!-- 이유를 좀 더 알아보도록 해요 -->
    <button onclick="scope();">var를 쓰지 맙시다.</button>

    <script>

        // 버튼을 클릭하면 변수를 선언도 하고 출력도 하는걸 만들어보자
        // 클릭했을 때! 뭔가를 하고싶다 -> 버튼 요소에 접근을 먼저 해야함

        document.querySelector("#var-btn").onclick = function () {

            var userId = "user01"; // var 하고 변수 선언하고 대입연산자 오른쪽의 값 대입
            console.log(userId);

            // 새로운 값 대입도 문제 없음
            userId = "user02";
            console.log(userId);

            // var가 자료형은 아니고 변수 선언할 때 사용하는 키워드!
            // 그래서 일어나는 일
            userId = 12321213;
            console.log(userId);
            // 문자열 들어가는 자리에 숫자값이 들어갈수도 있음, 자료형이 정해지지 않았음

            userId = false; // 논리값도 들어갈 수 있음
            console.log(userId);

            // 동일한 식별자로 변수를 중복으로 선언할 수 있음
            // 자바에서는 난리났을텐데.. 자바스크립트는 이게 가능하네.. 문제있네..
            var userId = "user03";
            console.log(userId);

            // 자료형이 다른것도 잘 들어가고 똑같은 이름의 변수 선언도 가능하고

            // ??? 11:00

            // 1) var키워드는 중복선언이 가능하다. / 재할당도 가능
            // var는 안쓰는게 기본(웬만하면 쓰지 않는 것이 좋다, 정말 특별한 이유가 있지 않다면)
            // 변수를 선언할 때는 기본적으로 const를 쓰고(defalut)
            // 특정 상황에서만 let을 사용

            console.log("--------------------------------------------------");

            let userPwd = "pass01";
            console.log(userPwd);

            // let도 재할당 가능(변수 값 넣는거)
            userPwd = "pass02";
            console.log(userPwd);

            // var와 의 차이점은 동일한 이름으로 userPwd를 선언하려고 하면 안됨
            // let userPwd;
            // Cannot redeclare block-scoped variable 'userPwd'.javascript
            // 브라우저 개발자도구에서도 Uncaught SyntaxError: Identifier 'userPwd' has already been declared
            // 2) let 키워드는 중복선언이 불가능 / 재할당은 가능

            console.log("--------------------------------------------------");

            const userName = "고길동";
            console.log(userName);

            // userName = "홍길동";
            // VSC에서는 붉은줄이 없음
            // 실제로 저장하고 브라우저에서 확인하면
            // Uncaught TypeError: Assignment to constant variable.
            // const userName; 이것도 안됨
            // const email; 초기화도 해야함
            // 아무튼 제약이 많다, 이게 권장사항임
            // 실제로 JS를 사용할 때 요소객체를 받아서 참조해서 사용하는데
            // 수정할 때 요소객체의 속성값을 바꿈(요소를 바꾸면 위험), 이건 const랑은 관련이 없음
            // 아무튼 const를 기본으로 사용하고
            // 반복문과 같은 경우에 제어변수는 값이 바뀌어야하니까 그럴 때 let을 써서 값을 바꾸는식으로 사용

            // 3) const키워드는 중복선언 X / 재할당 X / 초기화 반드시 해야함

            // var키워드는 자유롭게 변수를 선언하고 사용할 수 있다는 장점이 있음
            // 중복된 변수명을 사용할 수 있음 / 의도치 않게 값의 변경이 일어날 수 있다는 장점보다 훨씬 큰 어마어마한 단점이 있음
            // ==> 보완하기 위해서 나온게 let, const

            // 권장사항 : 반드시 const를 이용해서 변수를 선언
            //           혹여나 값의 변화가 필요한 경우에만 let 사용

            // 무조건 JS에서는 const, 반드시 초기화 진행

        };

        function scope() {

            // var로 선언하면 호이스팅? 끌어올려짐? 이라는게 일어남
            // ??? 11:19 나중에 선언과 값을 대입하면 선언은 scope 시작할 때 생성되고 ...?
            // 무슨 일이 일어났나요 ㅠㅠ?

            // var variable;
            // console.log(variable);

            // console.log(name); undefined 출력되는 이유???
            // var name = "홍길동";

            // let이랑 const도 호이스팅이 되긴 함
            // 브라우저에서 Uncaught ReferenceError: Cannot access 'name' before initialization
            // 명확하게 알 수 있음
            // console.log(name);
            // let name = "홍길동";

            // var는 살아가는 영역이 함수 스코프 내부
            // 1) var는 functionScope == 변수가 선언된 함수영역에서 사용할 수 있음
            // 예시로 for문을 돌릴 때, 초기식에 넣는 제어변수는 for 스코프가 끝나면 죽어야함
            for (var i = 0; i < 5; i++) { }
            console.log(i); // for문 밖인데 쓸 수 있음

            if (1) {
                console.log(i);
                var userName = "홍길동";
            }

            console.log(userName); // 끌어올림 당해서 함수영역 어디서든 쓸수있음
            // 물론 함수 영역 바깥을 넘어가면 안되긴해

            // var의 이런 성격때문에 문제가 많이 되었으니까
            // 2) let, const는 blockScope == 자기 선언된 블록에서만 사용가능
            if (2) {
                let age = 20;
                const hobby = "취미당 ㅎ";
            }

            // if 블록 내부에서 선언되었기 때문에 if 블록 바깥에서는 사용할 수 없다
            // console.log(age); Uncaught ReferenceError: age is not defined
            // console.log(hobby); Uncaught ReferenceError: hobby is not defined

            // 결론 : 변수는 const를 쓰자

        };

    </script>

    <hr />

    <h3>* 변수 선언 위치에 따른 전역 / 지역 변수</h3>
    <!-- 자바는 전역변수 개념이 없지만(역할하는 애들은 있음) 웬만한 다른 언어에는 다 있음 -->
    <!-- 자바스크립트에서는 전역변수 개념이 중요 -->

    <!-- 지역은 블록스코프(중괄호 안)를 생각
    전역은 문서 내 전체 어디에서든 이런 의미 -->

    <!-- 변수명(식별자)은 뭐 사투리같은거죠, 제주도에서는 고구마를 감저라고 부른다 이런거
    감자가 식별자라고 치면 전국에서 흙색을 생각할텐데 제주도에서는 고구마나 귤이라고 생각할수있겠지
    똑같은 이름이라도 지역에서만 통용되기도 하고 밖에서도 통용되기도 하는 그런 개념
    현실세계에 영향을 많이 미치는 학문들 수학 과학, 전산학은 이 하위 학문이라 여기서 뭘 많이 따왔을테니
    그런관점에서 접근하면 받아들이기 편할지도?
    -->

    <script>

        // 계속 블록안에서 변수선언했는데, 이번에는 script 태그에서 변수를 선언해보자

        // 변수 선언
        var str = "var 전역변수";
        // ??? 11:32 스코프 내부나 다른데 선언한게 아니고 ???

        // 자바스크립트는 키워드를 붙이지 않아도 변수 선언을 할 수 있다
        str2 = "전역변수";

        // 자바스크립트 최상위객체의 onload 속성을 사용해보자

        // ??? 11:35
        // 화면상의 요소를 읽어들이는 시간이 있음(전체 구조 파악해서 요소 파싱하고 그 위에 스타일 입히고 스크립트 실행을 마지막으로)
        // 아무튼 이렇게 브라우저가 해석시키고 동작시키는 절차가 있음
        // 스크립트 태그가 버튼보다 위에 있으면 버튼이 생성되지 않아서 태그가 실행되지 않는 현상이 있었음

        // window.onload = 현재 이 HTML문서가 전부 다 로딩되고나서(== 전부다 읽고 나면)
        // 곧바로 실행할 이벤트 핸들러(익명함수)를 대입
        window.onload = function () {

            // alert("하잉");
            // 얘는 쿄쿜보다 위에있다고 먼저 수행되는게 아니라
            // ??? 11:37 문서 만들어내는데 필요한거 전부 하고나서 여기가 수행됨......????

            var str = "지역변수"; // 전역변수와 중복된 이름으로
            var str3 = "새로운 지역변수"; // 이름이 겹치지 않는 새로운 지역변수도 선언
            // window. 이게 생략된걸로 취급됨, 자동으로 들어감
            str4 = "나는 뭐게?"; // 객체에 속성을 추가하는 방법, window것이 된다

            console.log("----------str----------");
            console.log(str); // 변수명이 동일하다면 지역변수 우선권이 높음
            // 밖에도 있고 안에도 있는데 식별자가 같은것중에 누가나오는거지?
            // 지역변수가 우선권이 높구나~ 제주도에 왔구나~

            // 스코프 안에서 바깥에 있는 str을 사용하고싶을수도 있지, 그럼 이 안에서는 어떻게해?
            // 자바스크립트에서 변수가 선언되었다는 것은 얘도 어딘가에 어떤 형태로 들어가있다는거지?
            // 자바스크립트의 모든것은 property-value로 이루어진다. 그게 아닌게 없음. 단하나도.
            // 변수가 선언되었다는것은 어딘가에 property-value가 쌍으로 만들어졌다는 것인데, 어느 객체에 들어가있는거임?

            console.dir(window);
            // 이거 브라우저 개발자도구에서 확인함
            // 자바스크립트에서 전역변수의 의미, 이친구들을 다른데서 쓰겠다면 어딘가에 있음
            // 우리가 배운 내용으로는 선택지가 두개뿐, document / window
            // document는 뭐뿐?
            // 전역변수는 window 객체에 속성을 추가하고 값을 넣어주는것
            // 그러므로 특정 구역 내에서 전역변수를 쓰고싶다면 window의 property이므로 window를 참조해서 접근
            console.log(window.str);

            // 지금 상황에서 바깥의 전역변수를 사용할 수 있는 방법 하나 더
            console.log(this.str); // this도 window 객체를 의미하니까 똑같이 접근해서 사용할 수 있음

            // this키워드가 항상 window객체를 가리키는 것은 아님

            // 자바스크립트는 아 모든게 property-value 쌍으로 이루어진 무언가다!(속성-값 쌍이구나)
            // 변수 함수 객체 뭘하든 이 쌍, 그러면 간단해짐
            // 어차피 속성에서 접근하는 방법은 주소 + . + 속성명 쓰면 끝이니까

            // 결국엔 공간에 값 넣고 빼기임, 개발은 다 똑같음.. 항상.. 이게 다야..
            // 이렇게 생각하기가 어려운것뿐, 생각 스위치 한번만 바꾸면됨, 바꾸기가 어려워서 그렇지(컴퓨팅사고)
            // 항상 컴퓨터처럼 생각하는 연습을 하자
            // (자전거허용) <- 이걸 보면 자전거허용타입으로 형변환을 하는구나, 괄호빼면 자전거허용이라는 다섯글자 스트링값이구나..
            // 정보와 데이터 처리니까 값을 봤을 때 어떻게 처리할지 자료형이 뭔지 이런거 생각하면서 다니기

            // 스크래치로 코딩.. 컴퓨팅 사고를 배우려고 하는것, 논리적인 사고 흐름을 머릿속으로 전자두뇌 만들기
            // 논리적인 사고를 하려면 어떻게 해야하는가

            console.log("----------str2----------");
            console.log(str2); // window, this키워드 붙일 수 있음(웬만하면 붙여주는 편이 전역변수다 보여주고 의미가 명확함)
            // 붙여주는편이 조금 더 명확하긴함
            // 순수 전역변수, 지역에 동일한 이름이 없음

            console.log("----------str3----------");
            console.log(str3); // ??? 12:10 이녀석은 ???
            console.log(window.str3); // undefined(정의되지않음)
            // var로 선언되었기 때문에 동작은 함

            console.log("str4");
            console.log(str4); // ??? 얜 또 뭐임 아ㅜ

        };

        // alert("쿄쿜");

    </script>

    <hr />

    <h3>* 자료형</h3>

    <p>
        변수 선언 시 자료형을 별도로 지정하지 않음(자료형의 개념이 없는건 아님)
        <br />
        => 변수에 대입되는 값에 따라서 알아서 자료형을 결정함 : 타입추론
        <!-- const로 선언하니까 자료형은 안적었음, 애초에 이렇게 만들어진 녀석 -->
    </p>

    <!-- 자바는 자료형이 굉장히 중요한 언어(아마도 50% 이상 차지할지도..? 조금만 삐끗해도 와장창 난리) -->
    <!-- 자바도 타입추론이 가능함, var로 선언하면됨... 근데 잘 안 씀 -->
    <!-- 편하긴 진짜 편함, JDK 10버전부터 나옴, 처음엔 컴파일러가 타입을 추론하느라 속도가 떨어지고 성능이 너무 떨어짐 -->
    <!-- 최적화되다보니 지금은 쓸만하고 편함, 근데 안씀(특정 프레임워크나 라이브러리에서는 문법적으로 필수적으로 필요할수도) -->
    <!-- 평상시에는 문제가 발생할 여지가 생기기 때문에 잘 안 씀(내 의도와 컴파일러 생각이 다를때 무조건 RuntimeException) -->
    <!-- 선언하고 나중에 계속 쓸텐데 다른사람이 봤을 때 애매해짐, 다형성을 쓰려고 한건지 뭘쓰려고 한건지..?
    얘를 써버리면 자바의 가장 큰 특징인 다형성이 없어져버림 -->
    <!-- 웬만한 경우에는 안전성을 추구해야하니까 사용할 일이 많지는 않음, int나 boolean은 쉽겠지만 근데 뭐 그래도 잘 안씀 -->

    <!-- 아무튼 자바스크립트는 전부 타입추론으로 받아버리니까 좋아보이지만 사실은 단점.. 문제임 -->
    <!-- 그래서 나온 게 타입스크립트 -->
    <!-- 이걸 해결할수가 없음, 앞에 짜놓은 코드를 쓸수가 없게됨, 개발은 항상 앞의 코드가 문제가 생겨도 엎을 수 없음, 걔를 다 고치면 만들어놓은 프로그램 못쓰게되니까 결국 안고가야함 -->
    <!-- 사용하기 편한건 장점이고 그외는 단점, 타입추론을 하지만 실제로는 자료형이 존재한다 -->

    <h4>자바스크립트의 자료형</h4>

    <!-- ul>li*6 -->
    <ul>
        <li>string(문자열)</li> <!-- 소문자로 시작하는 string -->
        <li>number(숫자)</li>
        <li>boolean(논리)</li>
        <li>object(객체)</li>
        <li>function(함수)</li>
        <!-- 사실상 여기 다섯개까지만 알아도 되고 -->
        <li>undefined(초기화가 안된 상태)</li>
        <!-- 초기화를 안해서 들어온 값이 없으니 타입을 붙일 수 없어서 -->
    </ul>

    <button id="type-btn">자료형</button>
    <div id="area" style="border: 1px solid beige; height: auto; min-height: 150px"></div>

    <script>

        // 버튼을 클릭하면 div 요소에 내용을 출력해줄것이다!
        // 버튼 요소에 접근하는것부터 해야겠군
        document.querySelector("#type-btn").onclick = function () {

            // 여러 자료형의 변수를 선언해보자
            const name = "홍길동";
            const age = 15;
            const isGoodThief = false;
            const hobby = ["운동", "공부"]; // 자바스크립트의 배열을 써보자, 대괄호 안에 요소 추가

            const family = {
                "아빠": "홍준표",
                "형": "홍석천",
            }; // 자바스크립트 객체는 중괄호로 만들어줌

            const testFn = function () {
                alert("가족 못부름");
            };

            // const로는 초기화 하지 않은 변수를 선언할 수 없음, undefined도 해보고 싶으니 let으로 선언해보자
            let noVal;

            // div 요소 선택해서 여기에 변수들을 출력해봐야겠당
            const area = document.getElementById("area");

            // 일단 접근해놨으니 content 영역에 가려면? area에 참조
            /*
            // 자바식 해결법
            area.innerHTML = name + "<br>";
            area.innerHTML += age + "<br>";
            area.innerHTML += isGoodThief + "<br>";
            area.innerHTML += hobby + "<br>";
            area.innerHTML += family + "<br>";
            area.innerHTML += testFn + "<br>";
            area.innerHTML += noVal + "<br><hr>";
            // 이렇게 해도 잘 나오지만 언어마다 특성, 문법, 권장스타일이 다르니까
            // 이런 문법 보다는
            */

            // 자바 스크립트식
            area.innerHTML = `${name} <br>
                              ${age} <br>
                              ${isGoodThief} <br>
                              ${hobby} <br>
                              ${family} <br>
                              ${testFn} <br>
                              ${noVal} <br><hr>`;
            // 보기좋고 만들기도 편하고 깔끔하군요 백틱쓰니까
            // 문자열과 변수를 섞어쓰고싶을 때 이 문법으로 편하게 작성할 수 있군요

            // 변수에 일부러 다른 자료형 값을 넣음
            // 문자열, 숫자, 논리값 다 잘 나옴
            // 배열은? 결과가 앞뒤로 붙어있던 대괄호는 없어지고 요소들이 comma로 구분되어 나열됨
            // 객체는? object Object 라고 나옴(타입, 프로토타입)
            // 함수는? 대입된 것이 생긴 그대로 화면상에 출력됨
            // noVal은? undefined라고 나온다
            // 객체, function, undefined는 화면이나 컨텐트 영역에 출력하는 용도로 쓰기에는 좀 그렇군요
            // string, number, boolean(얘도 애매하긴 하네).. 결국 주로 array, string, number 세개가 되겠네요

            // 아무튼 얘네가 어떤 타입으로 값이 되었는지 확인해보자
            // 자료형 출력해보기
            // 자료형을 확인할 때 필요한 함수 typeof(인자값);
            area.innerHTML += `${typeof (name)} <br>
                               ${typeof (age)} <br>
                               ${typeof (isGoodThief)} <br>
                               ${typeof (hobby)} <br>
                               ${typeof (family)} <br>
                               ${typeof (testFn)} <br>
                               ${typeof (noVal)} <br><hr>`;
            // 배열의 type도 object로 나오고 나머지는 다 똑같음

        };

    </script>

</body>

</html>